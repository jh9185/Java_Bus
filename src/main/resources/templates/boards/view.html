<html xmlns xmlns:th="http://www.w3.org/1999/xhtml" : th="http://www.thymeleaf.org">
<head>
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>

    <script src="js/vendor/modernizr-3.8.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script>window.jQuery || document.write('<script src="@{/js/vendor/jquery-3.4.1.min.js}"><\/script>')</script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<meta charset="UTF-8">
<title>Title</title>
</head>
<body>
<div class="container">
    글번호 :
    <div>
        <textarea readonly="readonly"
                  class="form-control"
                  th:text="${view.boardId}">
        </textarea>
    </div>
    조회수 :
    <div>
        <textarea readonly="readonly"
                  class="form-control"
                  th:text="${view.read}">
        </textarea>
    </div>
    제목 :
    <div id="title">
        <textarea readonly="readonly"
                  class="form-control"
                  th:text="${view.title}">
        </textarea>
    </div>
    작성자 :
    <div id="name">
        <textarea readonly="readonly"
                  class="form-control"
                  th:text="${view.name}">
        </textarea>
    </div>
    내용 :
    <div id="content">
        <textarea readonly="readonly"
            class="form-control"
            th:text="${view.content}">
        </textarea>
    </div>

    <button id="deleteBtn" class="btn btn-danger btn-sm float-right">삭제</button>
    <button id="updateBtn" class="btn btn-info btn-sm float-right">수정</button>
    <button id="mainBtn" class="btn btn-secondary btn-sm float-right">목록</button>

    <form id="form" th:action="@{/}" method="post">
    </form>

</div>

<script th:inline="javascript">
    $(document).on('ready', function (e) {
        var form= $("#form");
        var boardId= [[${view.boardId}]];
        $(document).on('click', '#mainBtn', function (e) {
            $('#form').attr("action","updateview");
            var read = [[${view.read}]] +1;
            form.append("<input type='hidden' name='boardId' value='"+boardId+"'>");
            form.append("<input type='hidden' name='read' value='"+read+"'>");
            form.submit();
        })
        $(document).on('click', '#deleteBtn', function (e) {
            $('#form').attr("action","delete");
            form.append("<input type='hidden' name='boardId' value='"+boardId+"'>");
            form.append("<input type='hidden' name='_method' value='delete'>");
            form.submit();
        })
        $(document).on('click','#updateBtn',function (e) {
            var str="<input class='form-control' width='250'" +
                "placeholder='제목 입력' id='updateTitle'>";
            $("#title").html(str);
            str="<input class='form-control' placeholder='작성자 입력'" +
                "id='updateName'></input>";
            $("#name").html(str);
            str="<textarea class='form-control' placeholder='내용 입력'" +
                "id='updateContent'></textarea>";
            $("#content").html(str);
            $("#updateBtn").attr("id","updateConfirmBtn");
        })

        $(document).on('click','#updateConfirmBtn',function (e){
            $('#form').attr("action","update");
            var updateTitle= $('#updateTitle').val();
            var updateName = $('#updateName').val();
            var updateContent=$('#updateContent').val();
            var updateread = [[${view.read}]];
            form.append("<input type='hidden' name='boardId' value='"+boardId+"'>");
            form.append("<input type='hidden' name='_method' value='put'>");
            form.append("<input type='hidden' name='title' value='"+updateTitle+"'>");
            form.append("<input type='hidden' name='name' value='"+updateName+"'>");
            form.append("<input type='hidden' name='read' value='"+updateread+"'>");
            form.append("<input type='hidden' name='content' value='"+updateContent+"'>");
            form.submit();

        })
    })

</script>

</body>
</html>